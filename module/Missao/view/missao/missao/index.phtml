<script type="text/javascript">
    function getNomePermissao(enumPermissao) {
        if (enumPermissao == 'administrador') {
            return 'Administrador';
        } else if (enumPermissao == 'coordenador') {
            return 'Coordenador';
        } else if (enumPermissao == 'especialista') {
            return 'Especialista';
        } else if (enumPermissao == 'lider_missao') {
            return 'Líder da Missão';
        }
    }
</script>

<?php
$title = 'Missões';
$this->headTitle($title);
?>
<h1><?php echo $this->escapeHtml($title);?></h1>

        <?php
            $isAutenticado = isset($permissao) && $permissao;
            $isCoord = $isAutenticado && $permissao == 'coordenador';
        ?>

<table class="table">
<tr>
    <th>Nome</th>
    <th>Status</th>
    <?php if ($isCoord){ ?>
    <th>Recursos</th>
    <?php } ?>
    <th>&nbsp;</th>

</tr>
<?php foreach ($Missoes as $Missao) : ?>
<tr>
    <td><?php echo $this->escapeHtml($Missao->nome);?></td>
    <td>
        <?php if ($Missao->status == "andamento"){ ?>
        <?php echo $this->escapeHtml("Em andamento");?>
        <?php } ?>
        <?php if ($Missao->status == "concluida"){ ?>
        <?php echo $this->escapeHtml("Concluída");?>
        <?php } ?>
    </td>
    
    <?php if ($isCoord){ 

    if ($Missao->recursosAlocados == "nao"){ ?>
    <td>
        <a href="<?php echo $this->url('missao',
            array('action'=>'alocarrecursos', 'id' => $Missao->id));?>">Alocar recursos</a> 
    </td>
    <?php }else{ ?>

        <td></td>
    <?php
    } 
    } ?>
    


    <td>
        <a href="<?php echo $this->url('missao',
            array('action'=>'detalhes', 'id' => $Missao->id));?>">Detalhes</a> 
    </td>
</tr>
<?php endforeach; ?>
</table>